---
title: ä½¿ç”¨dayjsæ›¿ä»£moment
tags:
  - æŠ€æœ¯ç§¯ç´¯
  - å‰ç«¯
  - js
categories:
  - æŠ€æœ¯ç§¯ç´¯
  - å‰ç«¯
  - js
toc: true
abbrlink: e362d928
date: 2020-08-13 10:21:40
---

![é¦–å±å›¾](https://s1.ax1x.com/2020/08/13/azsXcR.jpg)

<!-- more -->

Moment.js æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„ JS æ—¶é—´åº“ï¼Œå¾ˆå¤§åœ°æ–¹ä¾¿äº†æˆ‘ä»¬å¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚
ä½†æ˜¯ Moment.jså¤ªé‡äº†(200k+ with locals)ï¼Œå¯èƒ½ä¸€èˆ¬é¡¹ç›®ä¹Ÿåªä½¿ç”¨åˆ°äº†å¥¹å‡ ä¸ªå¸¸ç”¨çš„APIã€‚
è™½ç„¶ç¤¾åŒºä¹Ÿæœ‰å‡ ä¸ªè½»é‡çš„æ—¶é—´åº“ï¼Œè¦æƒ³è¿ç§»è¿‡å»åˆä¼šå¢åŠ æ–°çš„å­¦ä¹ å’Œè¿ç§»æˆæœ¬ã€‚

**å¦‚æœèƒ½æœ‰ä¸€ä¸ªå’Œ Moment.js ä¸€æ ·è¯­æ³•ï¼Œä¸€æ ·åŠŸèƒ½ï¼Œåˆè½»é‡çš„åº“è¯¥å¤šå¥½ï¼**

Day.js æ˜¯ä¸€ä¸ªè½»é‡çš„ JavaScript æ—¶é—´æ—¥æœŸå¤„ç†åº“ï¼Œå’Œ Moment.js çš„ API è®¾è®¡ä¿æŒå®Œå…¨ä¸€æ ·. å¦‚æœä½ æ›¾ç»ç”¨è¿‡ Moment.js, é‚£ä¹ˆä½ å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨ Day.js

`Day.js` åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼Œç›¸åŒçš„APIï¼Œç›¸åŒçš„é“¾å¼æ“ä½œã€‚

```js
dayjs().startOf('month').add(1, 'day').set('year', 2018).format('YYYY-MM-DD HH:mm:ss');
```

* ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³•
* ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable)
* ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable)
* ğŸŒ I18n å›½é™…åŒ–
* ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“
* ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹

Day.js è™½ç„¶ä»…æœ‰ 2kb å¤§å°ï¼Œä½†æ˜¯åŠŸèƒ½ä¸€ç‚¹éƒ½æ²¡æœ‰é˜‰å‰²ã€‚åŒ…å«äº†æ—¶é—´å¤„ç†çš„å…¨éƒ¨å¸¸ç”¨æ–¹æ³•ã€‚

## ç®€å•ä½¿ç”¨

v1.6.0 æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–äº†ï¼ŒæŒ‰éœ€åŠ è½½éœ€è¦çš„è¯­è¨€ï¼Œé‚£æƒ³ç¼©å°æ‰“åŒ…ä½“ç§¯ï¼Œ
æå‡å¼€å‘ä½“éªŒåªéœ€è¦ `replace(/moment/g, 'dayjs')` å…¨å±€æ›¿æ¢ä¸€ä¸‹ã€‚
å°±èƒ½ä» `Moment.js + locals` 200kb å‡å°æˆ `dayjs` 2kbçš„ä½“ç§¯ã€‚
æ‰€æœ‰çš„APIè°ƒç”¨éƒ½ä¿æŒä¸å˜ï¼Œæ— éœ€ä¿®æ”¹ã€‚

æ¥æ„Ÿå—ä¸€ä¸‹ `Dayjs` çš„è¯­æ³•å§ï¼Œæ˜¯ä¸æ˜¯å¾ˆçœ‹èµ·æ¥äº²åˆ‡å‘¢ ğŸ˜‹ (æ²¡é”™ è¿™å°±æ˜¯ moment çš„è¯­æ³•å˜›)

### åˆ›å»º

```js
dayjs() // å½“å‰æ—¶é—´
dayjs('1995-12-25') // 1995-12-25
dayjs(Date.now() - 24 * 60 * 60 * 1000) // æ˜¨å¤©
```

### æ ¼å¼åŒ–

```js
dayjs().format('YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss') // 2018å¹´08æœˆ08æ—¥ 00:00:00
dayjs().format('[YYYY]') // "[2018]"ã€‚[] é‡Œçš„ä¼šåŸæ ·è¾“å‡ºã€‚
```

### æ“ä½œ

```js
dayjs().add(7, 'days') // ä¹‹åçš„ç¬¬7å¤©
dayjs().subtract(1, 'months') // ä¸Šä¸ªæœˆ
dayjs().startOf('months') // è·å–ä¸€æœˆåˆ
dayjs().endOf('year') // è·å–ä¸€å¹´å¹´æœ«
```

### æŸ¥è¯¢

```js
dayjs('2010-10-20').isBefore('2010-10-21') // æ—©äº
dayjs('2010-10-20').isAfter('2010-10-19') // æ™šäº
dayjs().isLeapYear() // é—°å¹´
```

## å‚è€ƒèµ„æ–™

* [day.jså®˜æ–¹æ–‡æ¡£](https://github.com/iamkun/dayjs/blob/HEAD/docs/zh-cn/README.zh-CN.md)
* [å¦‚ä½•ä½¿ç”¨è¼•é‡ç´šçš„ day.js è™•ç†è¤‡é›œæ—¥æœŸ](https://juejin.im/post/6844903597709197319)
* [Day.jsæ•™ç¨‹](https://www.jianshu.com/p/15d6a9c1bf18)
* [Day.js 2kBè¶…è½»é‡æ—¶é—´åº“ å’ŒMoment.jsä¸€æ ·çš„API](https://calpa.me/2018/09/19/five-minutes-to-reduce-application-weight-dayjs/)
