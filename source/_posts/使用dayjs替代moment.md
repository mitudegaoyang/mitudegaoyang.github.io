---
title: ä½¿ç”¨dayjsæ›¿ä»£moment
tags:
  - æŠ€æœ¯ç§¯ç´¯
  - å‰ç«¯
  - js
categories:
  - æŠ€æœ¯ç§¯ç´¯
  - å‰ç«¯
  - js
toc: true
abbrlink: e362d928
date: 2020-08-13 10:21:40
---

![é¦–å±å›¾](https://s1.ax1x.com/2020/08/13/azsXcR.jpg)

<!-- more -->

Moment.js æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„ JS æ—¶é—´åº“ï¼Œå¾ˆå¤§åœ°æ–¹ä¾¿äº†æˆ‘ä»¬å¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚
ä½†æ˜¯ Moment.jså¤ªé‡äº†(200k+ with locals)ï¼Œå¯èƒ½ä¸€èˆ¬é¡¹ç›®ä¹Ÿåªä½¿ç”¨åˆ°äº†å¥¹å‡ ä¸ªå¸¸ç”¨çš„APIã€‚
è™½ç„¶ç¤¾åŒºä¹Ÿæœ‰å‡ ä¸ªè½»é‡çš„æ—¶é—´åº“ï¼Œè¦æƒ³è¿ç§»è¿‡å»åˆä¼šå¢åŠ æ–°çš„å­¦ä¹ å’Œè¿ç§»æˆæœ¬ã€‚

**å¦‚æœèƒ½æœ‰ä¸€ä¸ªå’Œ Moment.js ä¸€æ ·è¯­æ³•ï¼Œä¸€æ ·åŠŸèƒ½ï¼Œåˆè½»é‡çš„åº“è¯¥å¤šå¥½ï¼**

Day.js æ˜¯ä¸€ä¸ªè½»é‡çš„ JavaScript æ—¶é—´æ—¥æœŸå¤„ç†åº“ï¼Œå’Œ Moment.js çš„ API è®¾è®¡ä¿æŒå®Œå…¨ä¸€æ ·. å¦‚æœä½ æ›¾ç»ç”¨è¿‡ Moment.js, é‚£ä¹ˆä½ å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨ Day.js

`Day.js` åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼Œç›¸åŒçš„APIï¼Œç›¸åŒçš„é“¾å¼æ“ä½œã€‚

```js
dayjs().startOf('month').add(1, 'day').set('year', 2018).format('YYYY-MM-DD HH:mm:ss');
```

* ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³•
* ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable)
* ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable)
* ğŸŒ I18n å›½é™…åŒ–
* ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“
* ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹

Day.js è™½ç„¶ä»…æœ‰ 2kb å¤§å°ï¼Œä½†æ˜¯åŠŸèƒ½ä¸€ç‚¹éƒ½æ²¡æœ‰é˜‰å‰²ã€‚åŒ…å«äº†æ—¶é—´å¤„ç†çš„å…¨éƒ¨å¸¸ç”¨æ–¹æ³•ã€‚

## å®‰è£…

### npm

```shell
npm install dayjs --save
```

```js
var dayjs = require('dayjs');
dayjs().format();
```

### cdn

```js
<script src="https://unpkg.com/dayjs"></script>
<script>
  dayjs().format();
</script>
```

> æ³¨ï¼šDay.js çš„è¿”å›å€¼éƒ½æ˜¯æ–°çš„ Dayjs å¯¹è±¡

### ä»momentè¿ç§»è‡³dayjs

v1.6.0 æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–äº†ï¼ŒæŒ‰éœ€åŠ è½½éœ€è¦çš„è¯­è¨€ï¼Œé‚£æƒ³ç¼©å°æ‰“åŒ…ä½“ç§¯ï¼Œ
æå‡å¼€å‘ä½“éªŒåªéœ€è¦ `replace(/moment/g, 'dayjs')` å…¨å±€æ›¿æ¢ä¸€ä¸‹ã€‚
å°±èƒ½ä» `Moment.js + locals` 200kb å‡å°æˆ `dayjs` 2kbçš„ä½“ç§¯ã€‚
æ‰€æœ‰çš„APIè°ƒç”¨éƒ½ä¿æŒä¸å˜ï¼Œæ— éœ€ä¿®æ”¹ã€‚

## ä½¿ç”¨

æ¥æ„Ÿå—ä¸€ä¸‹ `Dayjs` çš„è¯­æ³•å§ï¼Œæ˜¯ä¸æ˜¯å¾ˆçœ‹èµ·æ¥äº²åˆ‡å‘¢ ğŸ˜‹ (æ²¡é”™ è¿™å°±æ˜¯ moment çš„è¯­æ³•å˜›)

### è§£ææ—¶é—´

ç›´æ¥è¿è¡Œ dayjs()ï¼Œå¾—åˆ°åŒ…å«å½“å‰æ—¶é—´å’Œæ—¥æœŸçš„ Dayjs å¯¹è±¡

```js
dayjs() // è¿”å›å½“å‰æ—¶é—´ Tue, 28 May 2019 05:57:34 GMT
```

å¯ä»¥è§£æä¼ å…¥çš„ä¸€ä¸ªæ ‡å‡†çš„[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)æ—¶é—´å­—ç¬¦ä¸²ã€‚

```js
dayjs('1995-12-25') // Sun, 24 Dec 1995 16:00:00 GMT
```

å¯ä»¥è§£æä¼ å…¥çš„ä¸€ä¸ª Javascript Date å¯¹è±¡ã€‚

```js
dayjs(new Date(2018, 8, 18)) //Mon, 17 Sep 2018 16:00:00 GMT
```

å¯ä»¥è§£æä¼ å…¥çš„ä¸€ä¸ª Unix æ—¶é—´æˆ³ (13 ä½æ•°å­—)ã€‚

```js
dayjs(1318781876406) // Sun, 16 Oct 2011 16:17:56 GMT
```

å¯ä»¥è§£æè®¡ç®—åçš„æ—¶é—´ã€‚

```js
dayjs(Date.now() - 24 * 60 * 60 * 1000) // æ˜¨å¤©
```

Dayjs å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœæ‚¨æƒ³è·å¾—ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´ï¼Œè¯·æ‰§è¡Œ .clone()ã€‚ å‘ dayjs() é‡Œä¼ å…¥ä¸€ä¸ª Dayjs å¯¹è±¡ä¹Ÿèƒ½å®ç°åŒæ ·çš„æ•ˆæœã€‚

```js
dayjs(Dayjs)
dayjs().clone()
```

æ£€æµ‹å½“å‰ Dayjs å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ—¶é—´

```js
dayjs().isValid()
```

### æ ¼å¼åŒ–æ—¶é—´

æ ¼å¼åŒ– Dayjs å¯¹è±¡å¹¶å±•ç¤ºã€‚

æ¥æ”¶ä¸€ç³»åˆ—çš„æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²å¹¶æ›¿æ¢æˆç›¸åº”çš„å€¼ã€‚

```js
dayjs().format(String)
dayjs('2019-01-25').format('YYYY-MM-DD HH:mm:ss') // 2019-01-25 00:00:00
dayjs().format('YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss') // 2018å¹´08æœˆ08æ—¥ 00:00:00
dayjs().format('[YYYY]') // "[2018]"ã€‚[] é‡Œçš„ä¼šåŸæ ·è¾“å‡ºã€‚
```

|æ ¼å¼|è¾“å‡º|æè¿°|
|--|--|--|
|YY|18|ä¸¤ä½æ•°çš„å¹´ä»½|
|YYYY|2018|å››ä½æ•°çš„å¹´ä»½|
|M|1-12|æœˆä»½ï¼Œä» 1 å¼€å§‹|
|MM|01-12|æœˆä»½ï¼Œä¸¤ä½æ•°|
|MMM|Jan-Dec|ç®€å†™çš„æœˆä»½åç§°|
|MMMM|January-December|å®Œæ•´çš„æœˆä»½åç§°|
|D|1-31|æœˆä»½é‡Œçš„ä¸€å¤©|
|DD|01-31|æœˆä»½é‡Œçš„ä¸€å¤©ï¼Œä¸¤ä½æ•°|
|d|0-6|ä¸€å‘¨ä¸­çš„ä¸€å¤©ï¼Œæ˜ŸæœŸå¤©æ˜¯ 0|
|dd|Su-Sa|æœ€ç®€å†™çš„ä¸€å‘¨ä¸­ä¸€å¤©çš„åç§°|
|ddd|Sun-Sat|ç®€å†™çš„ä¸€å‘¨ä¸­ä¸€å¤©çš„åç§°|
|dddd|Sunday-Saturday|ä¸€å‘¨ä¸­ä¸€å¤©çš„åç§°|
|H|0-23|å°æ—¶|
|HH|00-23|å°æ—¶ï¼Œä¸¤ä½æ•°|
|h|1-12|å°æ—¶, 12 å°æ—¶åˆ¶|
|hh|01-12|Hours, 12 å°æ—¶åˆ¶, ä¸¤ä½æ•°|
|m|0-59|åˆ†é’Ÿ|
|mm|00-59|åˆ†é’Ÿï¼Œä¸¤ä½æ•°|
|s|0-59|ç§’|
|ss|00-59|ç§’ ä¸¤ä½æ•°|
|SSS|000-999|æ¯«ç§’ ä¸‰ä½æ•°|
|Z|+5:00|UTC çš„åç§»é‡|
|ZZ|+0500|UTC çš„åç§»é‡ï¼Œæ•°å­—å‰é¢åŠ ä¸Š 0|
|A|AM PM|&nbsp;|
|a|am pm|&nbsp;|

### æ“ä½œæ—¶é—´

æ‚¨å¯ä»¥å¯¹ Dayjs å¯¹è±¡å¦‚ä¸‹å¢åŠ å‡å°‘ä¹‹ç±»çš„æ“ä½œ

å¢åŠ æ—¶é—´å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Dayjs() å¯¹è±¡ã€‚

```js
dayjs().add(value : Number, unit : String);
dayjs().add(7, 'days'); // ä¹‹åçš„ç¬¬7å¤©
```

å‡å°‘æ—¶é—´å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Dayjs() å¯¹è±¡ã€‚

```js
dayjs().subtract(value : Number, unit : String);
dayjs().subtract(1, 'months'); //åœ¨å½“å‰åŸºç¡€ä¸Šå‡å°‘1ä¸ªæœˆ
```

è¿”å›å½“å‰æ—¶é—´çš„å¼€å¤´æ—¶é—´çš„ Dayjs() å¯¹è±¡ï¼Œå¦‚æœˆä»½çš„ç¬¬ä¸€å¤©ã€‚

```js
dayjs().startOf(unit : String);
dayjs().startOf('month'); // è·å–æœ¬æœˆåˆ
```

è¿”å›å½“å‰æ—¶é—´çš„æœ«å°¾æ—¶é—´çš„ Dayjs() å¯¹è±¡ï¼Œå¦‚æœˆä»½çš„æœ€åä¸€å¤©ã€‚

```js
dayjs().endOf(unit : String);
dayjs().endOf('year'); // è·å–æœ¬å¹´å¹´æœ«
```

### è®¾ç½®æ—¶é—´

è·å–æˆ–è®¾ç½®å¹´ä»½ã€‚

```js
dayjs().year() //2019
dayjs().year(2000) //Sun, 28 May 2000 06:14:07 GMT
```

è·å–æˆ–è®¾ç½®æœˆä»½ã€‚ä» 0 å¼€å§‹

```js
dayjs().month() //4 å®é™…ä¸Š5æœˆ
dayjs().month(0) //Mon, 28 Jan 2019 06:15:25 GMT
```

è·å–æˆ–è®¾ç½®æ—¥æœŸã€‚ä» 1 å¼€å§‹

```js
dayjs().date() //28 å½“å¤©æ˜¯2019å¹´5æœˆ28æ—¥
dayjs().date(1) //Wed, 01 May 2019 06:17:04 GMT
```

è·å–æˆ–è®¾ç½®æ˜ŸæœŸã€‚ä»æ˜ŸæœŸå¤© 0 å¼€å§‹

```js
dayjs().day() //2 å½“å¤©æ˜¯æ˜ŸæœŸäºŒ
dayjs().day(0) //Sun, 26 May 2019 06:18:13 GMT è¢«å¼ºè¡Œè®¾ç½®ä¸ºä¸Šå‘¨æ—¥
```

è·å–æˆ–è®¾ç½®å°æ—¶

```js
dayjs().hour()  //14 å½“æ—¶ä¸ºä¸‹åˆ2ç‚¹
dayjs().hour(12) //Tue, 28 May 2019 04:21:30 GMT ä¸æ¸…æ¥š
```

è·å–æˆ–è®¾ç½®åˆ†é’Ÿã€‚

```js
dayjs().minute() //22
dayjs().minute(59) //Tue, 28 May 2019 06:59:50 GMT
```

è·å–æˆ–è®¾ç½®ç§’

```js
dayjs().second()
dayjs().second(1)
```

è·å–æˆ–è®¾ç½®æ¯«ç§’ã€‚

```js
dayjs().millisecond()
dayjs().millisecond(1)
```

è·å–ä» Dayjs å¯¹è±¡ä¸­å–åˆ°çš„ä¿¡æ¯ ä¼ å…¥çš„å•ä½ (unit) å¯¹å¤§å°å†™ä¸æ•æ„Ÿ

```js
dayjs().get('month') //4
```

|å•ä½|ç¼©å†™|æè¿°|
|--|--|--|
|date||æ—¥æœŸ|
|day|d|æ˜ŸæœŸå‡  (æ˜ŸæœŸå¤© 0, æ˜ŸæœŸå…­ 6)|
|month|M|æœˆ (ä¸€æœˆ 0, åäºŒæœˆ 11)|
|year|y|å¹´|
|hour|h|æ—¶|
|minute|m|åˆ†|
|second|s|ç§’|
|millisecond|ms|æ¯«ç§’|

è®¾ç½®æ—¶é—´

```js
dayjs().set('date', 1);
dayjs().set('month', 3); // å››æœˆ
dayjs().set('second', 30);
```

### æ˜¾ç¤ºæ—¶é—´

è·å–ä¸¤ä¸ª Dayjs å¯¹è±¡çš„æ—¶é—´å·®ï¼Œé»˜è®¤æ¯«ç§’ã€‚

```js
const date1 = dayjs('2019-01-25')
const date2 = dayjs('2018-06-05')
date1.diff(date2) // 20214000000
date1.diff(date2, 'month') // 7
date1.diff(date2, 'month', true) // 7.645161290322581
date1.diff(date2, 'day') // 233
```

è¿”å› Unix æ—¶é—´æˆ³ (æ¯«ç§’)

```js
dayjs().valueOf()
```

è¿”å› Unix æ—¶é—´æˆ³ (ç§’)ã€‚

```js
dayjs().unix()
```

è¿”å›æœˆä»½çš„å¤©æ•°

```js
dayjs().daysInMonth()
```

è¿”å›åŸç”Ÿçš„ Date å¯¹è±¡ã€‚

```js
dayjs().toDate()
```

å½“åºåˆ—åŒ– Dayjs å¯¹è±¡æ—¶ï¼Œä¼šè¿”å› ISO8601 æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚

```js
dayjs().toJSON() //"2018-08-08T00:00:00.000Z"
```

è¿”å› ISO8601 æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚

```js
dayjs().toISOString()
```

è¿”å›å­—ç¬¦ä¸²

```js
dayjs().toString()
```

### æŸ¥è¯¢æ—¶é—´

æ£€æŸ¥ä¸€ä¸ª Dayjs å¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ª Dayjs å¯¹è±¡æ—¶é—´ä¹‹å‰ã€‚

```js
dayjs('2010-10-20').isBefore('2010-10-21') // æ—©äº
dayjs().isBefore(Dayjs, unit? : String);
dayjs().isBefore(dayjs()); // false
dayjs().isBefore(dayjs(), 'year'); // false
```

æ£€æŸ¥ä¸€ä¸ª Dayjs å¯¹è±¡æ˜¯å¦å’Œå¦ä¸€ä¸ª Dayjs å¯¹è±¡æ—¶é—´ç›¸åŒã€‚

```js
dayjs().isSame(Dayjs, unit? : String);
dayjs().isSame(dayjs()); // true
dayjs().isSame(dayjs(), 'year'); // true
```

æ£€æŸ¥ä¸€ä¸ª Dayjs å¯¹è±¡æ˜¯å¦åœ¨å¦ä¸€ä¸ª Dayjs å¯¹è±¡æ—¶é—´ä¹‹åã€‚

```js
dayjs('2010-10-20').isAfter('2010-10-19') // æ™šäº
dayjs().isAfter(Dayjs, unit? : String);
dayjs().isAfter(dayjs()); // false
dayjs().isAfter(dayjs(), 'year'); // false
```

æ£€æŸ¥ä¸€ä¸ª Dayjs å¯¹è±¡æ˜¯å¦æ˜¯é—°å¹´ã€‚

```js
dayjs().isLeapYear() // é—°å¹´
```

## å‚è€ƒèµ„æ–™

* [day.jså®˜æ–¹æ–‡æ¡£](https://github.com/iamkun/dayjs/blob/HEAD/docs/zh-cn/README.zh-CN.md)
* [å¦‚ä½•ä½¿ç”¨è¼•é‡ç´šçš„ day.js è™•ç†è¤‡é›œæ—¥æœŸ](https://juejin.im/post/6844903597709197319)
* [Day.jsæ•™ç¨‹](https://www.jianshu.com/p/15d6a9c1bf18)
* [Day.js 2kBè¶…è½»é‡æ—¶é—´åº“ å’ŒMoment.jsä¸€æ ·çš„API](https://calpa.me/2018/09/19/five-minutes-to-reduce-application-weight-dayjs/)
