---
title: 递归基础知识
abbrlink: 9ea2dc77
date: 2021-02-12 18:06:54
tags:
  - 技术积累
  - 前端
  - js
categories:
  - 技术积累
  - 前端
  - js
toc: true
---

![首屏图](https://z3.ax1x.com/2021/02/22/y7Le4x.jpg)

<!-- more -->

## 递归基础知识

### 什么是递归

在 JavaScript 程序中，函数直接或间接调用自己。通过某个条件判断跳出结构，有了跳出才有结果。

![递归](https://z3.ax1x.com/2021/03/12/6UUi2d.png)

### 递归的步骤(技巧)

1. 假设递归函数已经写好
2. 寻找递推关系
3. 将递推关系的结构转换为递归体
4. 将临界条件加入到递归体中（一定要加临界条件，某则陷入死循环，内存泄漏）

## 简单递归示例

通过简单的示例先来了解熟悉一下递归，看看如何使用递归？

### 求 1-100 的和

假设让你来，你是否会这样写？

```js
var sum = 0;
for (var i = 1; i <= 100; i++) {
  sum += i;
}
console.log(sum); // 5050
```

JavaScript 用递归如何计算求 1-100 的和了？

> 分析:

1.假设递归函数已经写好，既 sum(100)，就是求 1-100 的和。寻找递推关系: 就是 n 与 n-1 ,或 n-2 之间的关系：

> sum(n) == sum(n-1) + n

```js
var resulst = sum(100);
var resulst = sum(99) + 100;
...
```

2.这时候我们差一个重要的步骤，也就是临界值，来阻止程序死循环

将临界条件加入到递归中
求 100 转换为 求 99
求 99 转换为 求 98
求 98 转换为 求 97
…
求 2 转换为 求 1
求 1 转换为 求 1
即 sum(1) = 1

3.递归函数

```js
function sum(n) {
  if (n == 1) return 1;
  return sum(n - 1) + n;
}
var amount = sum(100);
console.log(amount); // 5050
```

### 求 2,4,6,8,10… 第 n 项与前 n 项之和

> 分析

假设已知函数 fn(n)为第 n 项,sum(n)为前 n 项之和

递归关系

```js
fn(n) = fn(n-1) + 2
sum(n) = fn(n) + sum(n-1)
递归体

function fn(n){
    return fn(n) = (n-1) + 2
}
function sum(n){
    return sum(n) = fn(n) + sum(n-1);
}
```

这时候我们同样差一个重要的步骤，也就是临界值，来阻止程序死循环

1、临界条件

```js
fn(0) = 2
sum(0) = 2;
```

2、递归函数

```js
function fn(n) {
  if (n == 0) return 2;
  return fn(n - 1) + 2;
}
function sum(n) {
  if (n == 0) return 2;
  return fn(n) + sum(n - 1);
}
var amount = sum(100);
console.log(amount); // 10302
```

## 递归的应用

实际项目中用到递归的有哪些地方？

![树形结构](https://z3.ax1x.com/2021/03/12/6UUErt.jpg)

### 遍历树形结构的数据

```js
var data = [{
  name: '第一代',
  child: [{
    name: '第二代',
    child: [{
      name: '第三代',
      child: [{
        ...
        ...
      }]
    },{
      name: '第三代'
    }]
  },{
    name: '第二代'
  },{
    name: '第二代'
  }]
}]
```

这样的数据结构，你就需要一个递归函数来解决问题了，因为你不知道有多少个 child，有多少层级在里面，可能是 100，也可能是 1 亿，所以就递归直到没有 child 后来终止程序。

### 接口调用

根据上一个接口返回数据条数 n，调用 n 次，虽然很不科学，但是小编实际遇到过这样的需求

```js
$.ajax(...).then((data)=>{
  // data是数组
  let fun = (index)=>{
    let params = data[index];
    $.ajax(...params).then(...)
    // 如果index小于data.length就继续执行fun函数
    if(index<data.length) fun(index+1);
    // 这时候index<data.length就是临界值，来阻止程序死循环
  }
  data && data.length && fun(0)
})
```

## 总结

递归在很多语言中都很常见，它能解决很多你不知道深度

同时本文重申三遍的问题，大家一定要记住。

## 参考资料

- [树形结构递归\_JavaScript 中如何使用递归？](https://blog.csdn.net/weixin_32549035/article/details/112729055)
